<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>functional based data visualized with ternary plots in the simplex • EpiCompare</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="functional based data visualized with ternary plots in the simplex">
<meta property="og:description" content="functional based data visualized with ternary plots in the simplex.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">EpiCompare</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/getting_started.html">Getting started with EpiCompare</a>
    </li>
    <li>
      <a href="articles/high-dimensional-bands-and-containment.html">High Dimensional Bands and Containment</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="epicompare" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#epicompare" class="anchor"></a>EpiCompare <img src="reference/figures/logo.png" align="right" alt="" width="120">
</h1></div>
<!-- badges: start -->

<p>The goal of EpiCompare is to develop functional based visualization and statistics that focus on use in ternary plots.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the developmental version of EpiCompare from github using:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"skgallagher/EpiCompare"</span>)</code></pre></div>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>Currently there are 13 data sets in which to explore the different <code>EpiCompare</code> functions. These correspond to different sources of raw data along, agent vs. aggregate format, and emphases of different processes such as vital dynamics (e.g. birth and).</p>
<p>Details of each can be found with <code>?{data}</code>.</p>
<ul>
<li><p><code>agent_sims</code> this is 50 x 3 x 188 array where entry (i,j,k) looks at the ith simulation, the jth statistic, and the kth agent. The statistics are (inititial state (0/1/2), SMax, IMax).</p></li>
<li><p><code>agent_sims_tidy</code> (“Simulations of Measles outbreaks for Hagelloch, Germany, 1861 (Tidy agent format)”): tidy version of <code>agent_sims</code> (9400 x 5), each row corresponds to an individual for a single simulation, and contains additional information on the individual’s initial state, and SMax, IMax.</p></li>
<li><p><code>EpiModel_agg_bd</code> Example output from the <code>EpiModel package</code> for an ICM with birth and death rates. The population <em>N</em> is non-constant.</p></li>
<li><p><code>EpiModel_det</code> output from the <code>EpiModel</code> package for a deterministic model (aggregate)</p></li>
<li><p><code>EpiModel_icm</code> Output from the <code>EpiModel</code> package for a stochastic ICM (aggregate)</p></li>
<li><p><code>hagelloch_agents</code> – One row is a “sufficient” statistic for each agent’s infection. Each agent’s infection is uniquely identified by an initial state, max time before infection (or T), and max time before recovery (or T). For the states, 0 = S, 1 = I, 2 = R.</p></li>
<li><p><code>hagelloch_aug_births</code> Like Hagelloch raw but augmented with births (it already had deaths). Five fake people have been added who join the population over time</p></li>
<li><p><code>hagelloch_raw</code> – One row is an agent. This is imported from the <code>surveillance</code> R package and the variable descriptions are found <a href="https://rdrr.io/rforge/surveillance/man/hagelloch.html">here</a> where it is originally labeled <code>hagelloch.df</code>. We have renamed it here to help distinguish it from the other data sets we derive from it.</p></li>
<li><p><code>hagelloch_raw2</code> Like Hagelloch raw but with additional, fake people with NA values for <code>tI</code> and <code>tR</code></p></li>
<li><p><code>hagelloch_sir</code> – One row is a state of (<em>t</em>, <em>s</em><sub><em>t</em></sub>, <em>i</em><sub><em>t</em></sub>, <em>r</em><sub><em>t</em></sub>) where <em>s</em><sub><em>t</em></sub> + <em>i</em><sub><em>t</em></sub> + <em>r</em><sub><em>t</em></sub> = <em>N</em> for <em>t</em> = 0, …, <em>T</em> = 94</p></li>
<li><p><code>pomp_arr</code> Example SIR simulation output of class <code>array</code> from the <code>pomp</code> packagee</p></li>
<li><p><code>pomp_df</code> Example SIR simulation of class <code>data.frame</code> from the <code>pomp</code> package</p></li>
<li><p><code>pomp_pomp</code> Example SIR simulation output of class <code>pomp</code> from the <code>pomp</code> package</p></li>
<li><p><code>pomp_sir</code> Example output from the <code>pomp</code> package.</p></li>
</ul>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggtern)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(EpiCompare)</code></pre></div>
<p>The following example comes from a Measles outbreak in Hagelloch, Germany in 1861. We have data on each child (agent) in the town.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hagelloch_raw <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/aes.html">aes</a></span>(<span class="dt">y =</span> tI, <span class="dt">z =</span> tR)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="reference/stat_aggregate.html">geom_aggregate</a></span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/coord_tern.html">coord_tern</a></span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">"S"</span>, <span class="dt">y =</span> <span class="st">"I"</span>, <span class="dt">z =</span> <span class="st">"R"</span>, <span class="dt">title =</span> <span class="st">"Town Analysis"</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="100%"></p>
<p>Previous work has suggested that the class (<code>CL</code>) the student was in effected how the experienced the outbreak. The below figure shows differences in the outbreak relative to this grouping.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hagelloch_raw <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">rename</span>(<span class="st">`</span><span class="dt">school grade</span><span class="st">`</span> =<span class="st"> </span>CL) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">school grade</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="st">`</span><span class="dt">number of students</span><span class="st">`</span> =<span class="st"> </span><span class="kw">n</span>())
<span class="co">#&gt; # A tibble: 3 x 2</span>
<span class="co">#&gt;   `school grade` `number of students`</span>
<span class="co">#&gt;   &lt;fct&gt;                         &lt;int&gt;</span>
<span class="co">#&gt; 1 preschool                        90</span>
<span class="co">#&gt; 2 1st class                        30</span>
<span class="co">#&gt; 3 2nd class                        68</span>

hagelloch_raw <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/aes.html">aes</a></span>(<span class="dt">y =</span> tI, <span class="dt">z =</span> tR, <span class="dt">color =</span> CL)) <span class="op">+</span>
<span class="st">       </span><span class="kw"><a href="reference/stat_aggregate.html">geom_aggregate</a></span>() <span class="op">+</span><span class="st"> </span>
<span class="st">       </span><span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/coord_tern.html">coord_tern</a></span>() <span class="op">+</span>
<span class="st">       </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">"S"</span>, <span class="dt">y =</span> <span class="st">"I"</span>, <span class="dt">z =</span> <span class="st">"R"</span>,
            <span class="dt">color =</span> <span class="st">"School Grade"</span>,
            <span class="dt">title =</span> <span class="st">"Town analysis by grade"</span>) </code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" width="100%"></p>
<div id="simulate-sir-data" class="section level3">
<h3 class="hasAnchor">
<a href="#simulate-sir-data" class="anchor"></a>Simulate SIR data</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n_sims &lt;-<span class="st"> </span><span class="dv">100</span>
n_time_steps &lt;-<span class="st"> </span><span class="dv">100</span>
beta &lt;-<span class="st"> </span>.<span class="dv">1</span>
gamma &lt;-<span class="st"> </span>.<span class="dv">03</span>
init_SIR &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">950</span>, <span class="dv">50</span>, <span class="dv">0</span>)
    
out &lt;-<span class="st"> </span><span class="kw"><a href="reference/simulate_SIR_agents.html">simulate_SIR_agents</a></span>(<span class="dt">n_sims =</span> n_sims,
                           <span class="dt">n_time_steps =</span> n_time_steps,
                           <span class="dt">beta =</span> beta, <span class="dt">gamma =</span> gamma,
                           <span class="dt">init_SIR =</span> init_SIR)
                                 
df_groups &lt;-<span class="st"> </span>out <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(sim) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="reference/agents_to_aggregate.html">agents_to_aggregate</a></span>(<span class="dt">states =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(tI, tR)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">rename</span>(<span class="dt">S =</span> X0, <span class="dt">I =</span> X1, <span class="dt">R =</span> X2)
  
df_groups <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/aes.html">aes</a></span>(<span class="dt">x =</span> S, <span class="dt">y =</span> I, <span class="dt">z =</span> R, <span class="dt">group =</span> sim)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">alpha =</span> .<span class="dv">1</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/ggtern/man/coord_tern.html">coord_tern</a></span>()</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="100%"></p>
</div>
</div>
<div id="notes" class="section level2">
<h2 class="hasAnchor">
<a href="#notes" class="anchor"></a>Notes:</h2>
<ol>
<li>For writing code that works with <code>tidyverse</code> 1.0 vs <code>tidyverse</code> &lt;= 0.8.3. We followed ideas found in <a href="https://tidyr.tidyverse.org/articles/in-packages.html">tidyr: in-packages</a>, for the code, and - when working with Travis CI (using a matrix for multiple builds) - we leverage ideas in <a href="https://github.com/tidyverse/design/issues/95">tidyverse travis on github</a> and <a href="https://principles.tidyverse.org/changes-multivers.html">tidyverse principles</a>.</li>
<li>For writing your own <code>geom</code>s and <code>stat</code>s that works with <code>ggtern</code> (which are generally restricted), the following 2 stack-exchange articles helped use do so with ease:
<ol>
<li><a href="https://stackoverflow.com/questions/57175114/ternary-plot-scaling-opacity-across-groups">stack-exchange: personal code idea</a></li>
<li><a href="https://stackoverflow.com/questions/31589479/how-to-fix-no-item-called-packagepkg-on-the-search-list-without-using-libra#comment51172891_31589479">stack-exchange: being able to access ggtern’s element write away</a></li>
<li>Finally, we’ve also leveraged ideas from <a href="https://stat.ethz.ch/pipermail/r-devel/2013-August/067210.html">R-devel: on avoiding problems with <code>:::</code></a> in <code>R/aaa.R</code> to overcome messages from CRAN relative to this hack (using <code>:::</code>). For some reason - when documenting for <code>pkgdown</code> website, we need to do <code><a href="https://rdrr.io/r/base/library.html">library(ggtern); EpiCompare:::update_approved_layers()</a></code>
</li>
</ol>
</li>
</ol>
</div>
<div id="contributors" class="section level2">
<h2 class="hasAnchor">
<a href="#contributors" class="anchor"></a>Contributors</h2>
<ul>
<li>Shannon Gallagher (<a href="https://github.com/skgallagher"><code>skgallagher</code></a>)</li>
<li>Benjamin LeRoy (<a href="https://github.com/benjaminleroy"><code>benjaminleroy</code></a>)</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://skgallagher.github.io/">Shannon Gallagher</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li>
<a href="https://benjaminleroy.github.io/">Benjamin LeRoy</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/skgallagher/EpiCompare"><img src="https://travis-ci.org/skgallagher/EpiCompare.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/skgallagher/EpiCompare"><img src="https://codecov.io/gh/skgallagher/EpiCompare/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://skgallagher.github.io/">Shannon Gallagher</a>, <a href="https://benjaminleroy.github.io/">Benjamin LeRoy</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
