<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examining COVID-19 with EpiCompare • EpiCompare</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Examining COVID-19 with EpiCompare">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">EpiCompare</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/getting-started.html">Getting started with EpiCompare (for SIR agent-based data)</a>
    </li>
    <li>
      <a href="../../articles/not-built-vignettes/comparing-bands-and-assessing-containment.html">Comparing bands and assessing containment</a>
    </li>
    <li>
      <a href="../../articles/not-built-vignettes/depths-impact-on-prediction-bands.html">Depths' impact on prediction bands</a>
    </li>
    <li>
      <a href="../../articles/not-built-vignettes/example-covid-19-us.html">Examining COVID-19 with EpiCompare</a>
    </li>
    <li>
      <a href="../../articles/not-built-vignettes/example-epimodel.html">Example of using EpiCompare with EpiModel outputs</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/skgallagher/EpiCompare">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="example-covid-19-us_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Examining COVID-19 with EpiCompare</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/skgallagher/EpiCompare/blob/master/vignettes/not-built-vignettes/example-covid-19-us.Rmd"><code>vignettes/not-built-vignettes/example-covid-19-us.Rmd</code></a></small>
      <div class="hidden name"><code>example-covid-19-us.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>Data for the COVID-19 outbreak is available publicly from many sources including from the <a href="https://github.com/CSSEGISandData/COVID-19">Johns Hopkins Coronavirus Tracker</a> github repository (<span class="citation">(Dong, Du, and Gardner 2020)</span>). We want to use EpiCompare to compare outbreaks in different US states.</p>
<p>In this vignette, we assume a <strong>SIR</strong> disease progression. That is, individuals begin in the susceptible state, move to the infectious state, and then finally are recovered.</p>
<p>In this vignette, we will</p>
<ol style="list-style-type: decimal">
<li><p>Download JHU Coronavirus data via the <code>R COVID19</code> package (<span class="citation">(Guidotti, n.d.)</span>).</p></li>
<li><p>Convert to SI format.</p></li>
<li><p>Impute a <strong>random</strong> number of recovered based on infection duration estimates to make the data into SIR format.</p></li>
<li><p>Compare the states’ outbreaks using EpiCompare.</p></li>
</ol>
<p>You will need to install/load the following packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(EpiCompare)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(knitr)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(COVID19)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyr)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(kableExtra)
<span class="kw">theme_set</span>(<span class="kw">theme_bw</span>())</code></pre></div>
</div>
<div id="downloading-the-coronavirus-data-for-the-us" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-the-coronavirus-data-for-the-us" class="anchor"></a>Downloading the coronavirus data for the US</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(COVID19)

data &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/COVID19/man/covid19.html">covid19</a></span>(<span class="st">"USA"</span>, <span class="dt">level =</span> <span class="dv">2</span>)  ## State level US data, will take a few seconds

data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(id, state, date, confirmed, recovered, deaths, pop) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="dt">position =</span> <span class="st">"center"</span>)</code></pre></div>
<table class="table table">
<thead><tr>
<th style="text-align:left;">
id
</th>
<th style="text-align:left;">
state
</th>
<th style="text-align:left;">
date
</th>
<th style="text-align:right;">
confirmed
</th>
<th style="text-align:right;">
recovered
</th>
<th style="text-align:right;">
deaths
</th>
<th style="text-align:right;">
pop
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
USA, Alabama
</td>
<td style="text-align:left;">
Alabama
</td>
<td style="text-align:left;">
2020-01-22
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4903185
</td>
</tr>
<tr>
<td style="text-align:left;">
USA, Alabama
</td>
<td style="text-align:left;">
Alabama
</td>
<td style="text-align:left;">
2020-01-23
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4903185
</td>
</tr>
<tr>
<td style="text-align:left;">
USA, Alabama
</td>
<td style="text-align:left;">
Alabama
</td>
<td style="text-align:left;">
2020-01-24
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4903185
</td>
</tr>
<tr>
<td style="text-align:left;">
USA, Alabama
</td>
<td style="text-align:left;">
Alabama
</td>
<td style="text-align:left;">
2020-01-25
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4903185
</td>
</tr>
<tr>
<td style="text-align:left;">
USA, Alabama
</td>
<td style="text-align:left;">
Alabama
</td>
<td style="text-align:left;">
2020-01-26
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4903185
</td>
</tr>
<tr>
<td style="text-align:left;">
USA, Alabama
</td>
<td style="text-align:left;">
Alabama
</td>
<td style="text-align:left;">
2020-01-27
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4903185
</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(state) 
  
<span class="kw">ggplot</span>(<span class="dt">data =</span> data, <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span>confirmed <span class="op">/</span><span class="st"> </span>pop, <span class="dt">group =</span> state)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"2020-03-16"</span>), <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(data<span class="op">$</span>date) <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> . <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(date <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(date)),
            <span class="kw">aes</span>(<span class="dt">label =</span> state), <span class="dt">vjust =</span> .<span class="dv">001</span>, <span class="dt">hjust =</span> <span class="dv">0</span>)  <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">""</span>, <span class="dt">y =</span> <span class="st">"(Cumulative Confirmed Cases) / (Population Size)"</span>)</code></pre></div>
<p><img src="example-covid-19-us_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>From this, it looks like the state dominates the others in terms of cumulative cases, even after adjusting for population size.</p>
<p>However, the outbreak did not begin on the same day in the states. So perhaps, we want to adjust for the timing. We can adjust the dates relative to the first case reported in the state.</p>
<p>This looks like the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(state) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(confirmed <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">first_date =</span> <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(date)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">rel_date =</span> date <span class="op">-</span><span class="st"> </span>first_date)
  
<span class="kw">ggplot</span>(<span class="dt">data =</span> data, <span class="kw">aes</span>(<span class="dt">x =</span> rel_date, <span class="dt">y =</span> confirmed <span class="op">/</span><span class="st"> </span>pop, <span class="dt">group =</span> state)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(data<span class="op">$</span>rel_date) <span class="op">+</span><span class="st"> </span><span class="dv">3</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> . <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(date <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(date)),
            <span class="kw">aes</span>(<span class="dt">label =</span> state), <span class="dt">vjust =</span> .<span class="dv">001</span>, <span class="dt">hjust =</span> <span class="dv">0</span>)  <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">"Days relative to first case in state"</span>, <span class="dt">y =</span> <span class="st">"(Cumulative Confirmed Cases) / (Population Size)"</span>)</code></pre></div>
<p><img src="example-covid-19-us_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>This view looks a little different from the raw-time version and now New York does not look to be completely dominant. On the other hand, this view makes it hard to compare states like MA, Illinois, CA, and AZ – states which all had an early case but did not have a sustained outbreak until much later.</p>
<p>Another idea is to standardize the time relative to the first time the .0005 cumulative cases per population threshold is crossed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data2 &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(state) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(confirmed<span class="op">/</span>pop <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.0005</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">first_date =</span> <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(date)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">rel_date =</span> date <span class="op">-</span><span class="st"> </span>first_date)
  
<span class="kw">ggplot</span>(<span class="dt">data =</span> data2, <span class="kw">aes</span>(<span class="dt">x =</span> rel_date, <span class="dt">y =</span> confirmed <span class="op">/</span><span class="st"> </span>pop, <span class="dt">group =</span> state)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(data2<span class="op">$</span>rel_date) <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> . <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(date <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(date)),
            <span class="kw">aes</span>(<span class="dt">label =</span> state), <span class="dt">vjust =</span> .<span class="dv">001</span>, <span class="dt">hjust =</span> <span class="dv">0</span>)  <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">"Days relative to .0005 Cases/Pop threshold"</span>, <span class="dt">y =</span> <span class="st">"(Cumulative Confirmed Cases) / (Population Size)"</span>)</code></pre></div>
<p><img src="example-covid-19-us_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Now it looks like New Jersey, in fact, looks like it has a worse outbreak than New York?</p>
<p><strong>Which picture shows the truth?</strong></p>
<p>We can play the same game over and over, we can pick arbitrary time points or thresholds to plot the relative time of the outbreak. As we see, this time point can skew our view of the outbreak.</p>
<p>An alternative to this arbitrary scaling is to use Time Free Analysis (TFA).</p>
</div>
<div id="adding-in-the-recovered" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-in-the-recovered" class="anchor"></a>Adding in the Recovered</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gamma &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">14</span> <span class="co"># assuming 14 days recovery</span>
data3 &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(state) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">new_cases =</span> confirmed <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag</a></span>(confirmed),
         <span class="dt">lag1_cases =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag</a></span>(confirmed)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">new_cases =</span> <span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(new_cases) <span class="op">|</span><span class="st"> </span>new_cases <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">0</span>, new_cases)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">new_recov =</span> <span class="kw"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span>(<span class="dt">n =</span> <span class="dv">1</span>, <span class="dt">size =</span> lag1_cases, <span class="dt">prob =</span> gamma))

states &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"New York"</span>, <span class="st">"New Jersey"</span>, <span class="st">"Louisiana"</span>,
                                          <span class="st">"Massachusetts"</span>, <span class="st">"Connecticut"</span>, 
                                          <span class="st">"District of Columbia"</span>, <span class="st">"Rhode Island"</span>,
                                          <span class="st">"Michigan"</span>, <span class="st">"Pennsylvania"</span>)

<span class="kw">ggplot</span>(<span class="dt">data =</span> data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(state <span class="op">%in%</span><span class="st"> </span>states), <span class="kw">aes</span>(<span class="dt">x =</span> confirmed <span class="op">/</span><span class="st"> </span>pop,
                        <span class="dt">y=</span> state,
                        <span class="dt">group =</span> state, <span class="dt">col =</span> date)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">4</span>, <span class="dt">alpha =</span> .<span class="dv">4</span>)  </code></pre></div>
<p><img src="example-covid-19-us_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">deaths &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(state) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">time =</span> date,
        <span class="dt">S =</span> (pop <span class="op">-</span><span class="st"> </span>confirmed) <span class="op">/</span><span class="st"> </span>pop <span class="op">*</span><span class="st"> </span><span class="dv">100</span>,
         <span class="dt">I =</span> (confirmed <span class="op">-</span><span class="st"> </span>deaths) <span class="op">/</span><span class="st"> </span>pop <span class="op">*</span><span class="st"> </span><span class="dv">100</span>,
        <span class="dt">Deaths =</span> deaths <span class="op">/</span><span class="st"> </span>pop <span class="op">*</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(state, time, S, I, Deaths) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span>()

sub &lt;-<span class="st"> </span>deaths <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(state <span class="op">==</span><span class="st"> "Pennsylvania"</span>)


<span class="kw">ggplot</span>(<span class="dt">data =</span> deaths <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(state <span class="op">%in%</span><span class="st"> </span>states),
       <span class="kw">aes</span>(<span class="dt">x =</span> S, <span class="dt">y =</span> I, <span class="dt">z =</span> Deaths, <span class="dt">group =</span> state, <span class="dt">col =</span> state)) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">aes =</span> .<span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_tern</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_zoom_L</span>(.<span class="dv">01</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Ternary"</span>)</code></pre></div>
<p><img src="example-covid-19-us_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_grouped &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(state) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">t =</span> date, <span class="dt">N =</span> pop)

out &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/cases_to_SIR.html">cases_to_SIR</a></span>(data_grouped, <span class="dt">par =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"gamma"</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">14</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">S =</span> X0, <span class="dt">I =</span> X1, <span class="dt">R =</span> X2)



<span class="kw">ggplot</span>(<span class="dt">data =</span> out <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(state <span class="op">%in%</span><span class="st"> </span>states),
       <span class="kw">aes</span>(<span class="dt">x =</span> S <span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dt">y =</span> I<span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dt">z =</span> R<span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dt">group =</span> state, <span class="dt">col =</span> state)) <span class="op">+</span><span class="st"> </span><span class="kw">coord_tern</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_path</span>(<span class="dt">alpha =</span> .<span class="dv">8</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> .<span class="dv">8</span>) <span class="op">+</span><span class="st">  </span><span class="kw">theme_zoom_L</span>(.<span class="dv">011</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">"Paired"</span>)</code></pre></div>
<p><img src="example-covid-19-us_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> out <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(state <span class="op">%in%</span><span class="st"> </span>states),
       <span class="kw">aes</span>(<span class="dt">x =</span> S <span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dt">y =</span> I<span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dt">z =</span> R<span class="op">/</span><span class="st"> </span>N <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dt">group =</span> state, <span class="dt">col =</span> state)) <span class="op">+</span><span class="st"> </span><span class="kw">coord_tern</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_path</span>(<span class="dt">alpha =</span> .<span class="dv">8</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> .<span class="dv">8</span>) <span class="op">+</span><span class="st">  </span><span class="kw">theme_zoom_L</span>(.<span class="dv">011</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">"Paired"</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>state) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"bottom"</span>)</code></pre></div>
<p><img src="example-covid-19-us_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-dong2020">
<p>Dong, Ensheng, Hongru Du, and Lauren Gardner. 2020. “An Interactive Web-Based Dashboard to Track Covid-19 in Real Time.” <em>The Lancet Infectious Diseases</em>. Elsevier.</p>
</div>
<div id="ref-covid19-kaggle-r">
<p>Guidotti, Emanuele. n.d. “Coronavirus Covid-19 (2019-nCoV) Epidemic Datasets.” Kaggle. doi:<a href="https://doi.org/10.34740/KAGGLE/DS/574488">10.34740/KAGGLE/DS/574488</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#downloading-the-coronavirus-data-for-the-us">Downloading the coronavirus data for the US</a></li>
      <li><a href="#adding-in-the-recovered">Adding in the Recovered</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://skgallagher.github.io/">Shannon Gallagher</a>, <a href="https://benjaminleroy.github.io/">Benjamin LeRoy</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
